<%### Keep in sync with views/auth/auth0/callback_cross_auth.html.erb ###%>

<%= javascript_include_tag 'https://cdn.auth0.com/js/lock/10.21/lock.min.js' %>
<%= javascript_tag do %>
  var auth0Lock = new Auth0Lock(<%= ENV['AUTH0_CLIENT_ID'].to_json.html_safe %>,
                                <%= ENV['AUTH0_DOMAIN'].to_json.html_safe %>, {
    auth: {
      redirectUrl: <%= ENV['AUTH0_CALLBACK_URL'].to_json.html_safe %>,
      responseType: 'code',
      auth: {
        audience: <%= ENV['AUTH0_DOMAIN'].to_json.html_safe %>
      },
      params: {
        scope: 'openid profile email' // Learn about scopes: https://auth0.com/docs/scopes
      }
    }
  });

  function signIn() {
    auth0Lock.show();
  }
<% end %>
